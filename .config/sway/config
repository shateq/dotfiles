# vim: filetype=swayconfig
# man 5 sway
set $mod Mod4
set $alt Mod1

set $term kitty
set $menu wofi --show drun | xargs swaymsg exec --
set $dmenu wofi --show run | xargs swaymsg exec -- 

set $left h
set $down j
set $up k
set $right l
# displays
set $lock_screen 'swaylock -f -c 282828 -k'
set $display_enable output * power on
set $display_disable output * power off

#: Backgrounds
set $bg1 "$HOME/Pictures/Bg/macos_seqoia.jpg"
output * bg $bg1 fill

#: resize and workspace mode
include conf.d/*
# BIT IMPORTANT 
include /etc/sway/config.d/*

# Idle (in seconds)
exec_always pkill -f swayidle
exec_always swayidle -w \
    timeout 180  '$disable_display' \
    timeout 420  '$lock_screen' \
         resume  '$enable_display' \
    timeout 900  'playerctl pause' \
    timeout 1200 'systemctl suspend' \
         resume  '$enable_display' \
    before-sleep 'playerctl pause; $lock_screen' \
    after-resume '$enable_display' \
           lock  '$lock_screen' \
         unlock  'kill -s 1 $(pgrep swaylock)'

# Clipboard manager
exec wl-paste --type text --watch cliphist store

seat * xcursor_theme Adwaita 28

floating_modifier $mod normal
focus_follows_mouse always
mouse_warping container

default_border pixel 1
smart_borders no_gaps
smart_gaps off

gaps vertical 2
gaps inner 4
gaps horizontal 6

input * {
    xkb_layout pl,pl
    xkb_variant colemak,
    xkb_options caps:backspace
}

#: Keybindings
#: with --locked
bindsym --locked {
    XF86AudioPlay exec playerctl play-pause
    XF86AudioPause exec playerctl pause
    XF86AudioStop exec playerctl stop
    XF86AudioPrev exec playerctl previous
    XF86AudioNext exec playerctl next
    XF86AudioRaiseVolume exec amixer set Master 4%+
    XF86AudioLowerVolume exec amixer set Master 4%-
    #pactl raises volume above 100% (bad)
    #XF86AudioRaiseVolume exec pactl set-sink-volume @DEFAULT_SINK@ +5%
    #XF86AudioLowerVolume exec pactl set-sink-volume @DEFAULT_SINK@ -5%
    XF86AudioMute exec pactl set-sink-mute @DEFAULT_SINK@ toggle
    XF86AudioMicMute exec pactl set-source-mute @DEFAULT_SINK@ toggle
}

#: layout independent
bindsym --to-code {
    $mod+Shift+q kill
    $mod+Ctrl+q exec 'playerctl pause; $lock_screen'

    $mod+x exec wtype -M shift -P delete
    $mod+c exec wtype -M ctrl -P Insert -p Insert -m ctrl
    $mod+v exec wtype -M shift -P Insert -p Insert -m shift

    $mod+$alt+v exec cliphist list | wofi --dmenu --pre-display-cmd "echo '%s' | cut -f 2" | cliphist decode | wl-copy
}

bindsym {
#: Keyboard layout
    $mod+$alt+grave input * xkb_switch_layout next
    $mod+$alt+Escape reload
    $mod+$alt+BackSpace exec swaymsg exit
#: Launch binds
    $mod+space exec $menu
    $mod+d exec $dmenu
    $mod+Return exec $term

    $mod+Shift+Return focus mode_toggle
    $mod+f fullscreen
    $mod+Shift+f floating toggle
#: screenshot
    Print exec grim -g $(slurp -d) "$HOME/Pictures/Screenshots/$(date +'%s_grim.png')"
#: mark
    $mod+m mark --add "MARK"
    $mod+Shift+m unmark
    $mod+$alt+m [con_mark="MARK"] focus
    $mod+Ctrl+m [con_mark="MARK"] move to workspace current
#: Motion binds 
    $mod+$left focus left
    $mod+$down focus down
    $mod+$up focus up
    $mod+$right focus right

    $mod+Shift+$left move left
    $mod+Shift+$down move down
    $mod+Shift+$up move up
    $mod+Shift+$right move right
#: Windows binds
    $mod+Shift+v splitv
    $mod+Shift+s splith

    $mod+t layout toggle split
    $mod+Shift+t layout tabbed
#: Scratchpad
    $mod+z scratchpad show
    $mod+Shift+z move scratchpad

#: Workspace binds
    $mod+n workspace next
    $mod+p workspace prev
    $mod+Tab workspace back_and_forth
    # goated! get out of my way
    $mod+Shift+Tab move container to workspace back_and_forth

    $mod+1 workspace number 1
    $mod+2 workspace number 2
    $mod+3 workspace number 3
    $mod+4 workspace number 4
    $mod+5 workspace number 5
    $mod+6 workspace number 6
    $mod+7 workspace number 7
    $mod+8 workspace number 8
    $mod+9 workspace number 9
    #: move
    $mod+shift+1 move container to workspace number 1
    $mod+Shift+2 move container to workspace number 2
    $mod+Shift+3 move container to workspace number 3
    $mod+Shift+4 move container to workspace number 4
    $mod+Shift+5 move container to workspace number 5
    $mod+Shift+6 move container to workspace number 6
    $mod+Shift+7 move container to workspace number 7
    $mod+Shift+8 move container to workspace number 8
    $mod+Shift+9 move container to workspace number 9
}

#bar { swaybar_command waybar; modifier none; position top;; status_command while date +'%a %d %b %H:%M'; do sleep 29; done; colors {; statusline #ffffff; background #323232; inactive_workspace #323232 #323232 #5c5c5c; }; };
#$mod+b bar mode toggle
bindsym $mod+Shift+b exec 'killall -SIGUSR1 waybar'
exec waybar
# notification daemon
exec mako
