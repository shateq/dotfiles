# Read `man 5 sway` for a complete reference.
set $mod Mod4
set $alt Mod1

set $left h
set $down j
set $up k
set $right l

set $term kitty
set $menu wofi --show drun | xargs swaymsg exec --
set $dmenu wofi --show run | xargs swaymsg exec -- 

set $o_laptop LVDS-1
set $o_hdmi HDMI-A-1

# BIT IMPORTANT 
include /etc/sway/config.d/*

# Idle 7 minutes, monitor off 10 minutes
exec swayidle -w \
         timeout 420 'swaylock -f -c 282828 -k' \
         timeout 600 'swaymsg "output * power off"' resume 'swaymsg "output * power on"' \
         before-sleep 'playerctl pause; swaylock -f -c 282828 -k'

assign [class="Spotify"] 3
assign [class="Vesktop"] 3
assign [class="steam"] 2
for_window [app_id="pavucontrol"] floating enable

# Output configuration
# You can get the names of your outputs by running: swaymsg -t get_outputs
output $o_laptop bg ~/Pictures/Bg/sparrow_lunch.jpg fill
output $o_hdmi bg ~/Pictures/Bg/retired_cinephile.jpg stretch

# Laptop lid
#bindswitch --reload --locked lid:on output $o_hdmi disable
#bindswitch --reload --locked lid:off output $o_hdmi enable

# Input layouts
input * {
    xkb_layout pl,pl
    xkb_variant ,colemak
    xkb_options caps:backspace
}

# Looks
default_border pixel 3
smart_borders no_gaps
smart_gaps on
gaps vertical 2
gaps inner 4
gaps horizontal 8

floating_modifier $mod normal
focus_follows_mouse always

# Launch binds
bindsym {
    $mod+Return exec $term
    $mod+space exec $menu
    $mod+d exec $dmenu

    $mod+Shift+q kill
    # lock the screen
    $mod+$alt+q exec 'playerctl pause; swaylock -f -c 282828 -k'
    # reload config file
    $mod+$alt+r reload
    $mod+$alt+BackSpace exec swaymsg exit
}

# Script binds
bindsym {
    # switch keyboard layout
    $mod+$alt+grave input * xkb_switch_layout next
    $mod+Shift+m mark --toggle m

    #$mod+b bar mode toggle
    $mod+$Shift+b exec 'killall -SIGUSR1 waybar'

    # toggle big screen output
    $mod+$Shift+d output $o_hdmi toggle
    $mod+a focus output $o_laptop
    $mod+Shift+a focus output $o_hdmi
}

# Motion binds 
bindsym {
    $mod+$left focus left
    $mod+$down focus down
    $mod+$up focus up
    $mod+$right focus right

    $mod+Shift+$left move left
    $mod+Shift+$down move down
    $mod+Shift+$up move up
    $mod+Shift+$right move right
}

# Windows binds
bindsym {
    $mod+Shift+p focus parent
    $mod+f fullscreen

    $mod+minus splitv
    $mod+equal splith

    # current container
    $mod+w layout tabbed
    $mod+t layout toggle split

    $mod+Shift+x floating toggle
    # Swap focus between the tiling area and the floating area
    $mod+x focus mode_toggle

    $mod+Shift+z move scratchpad
    $mod+z scratchpad show
}

# Workspace binds
bindsym {
    $mod+n workspace next
    $mod+p workspace prev
    $mod+Tab workspace back_and_forth

    $mod+1 workspace number 1
    $mod+2 workspace number 2
    $mod+3 workspace number 3
    $mod+4 workspace number 4
    $mod+5 workspace number 5
    $mod+6 workspace number 6
    $mod+7 workspace number 7
    $mod+8 workspace number 8
    $mod+9 workspace number 9

    $mod+Shift+1 move container to workspace number 1
    $mod+Shift+2 move container to workspace number 2
    $mod+Shift+3 move container to workspace number 3
    $mod+Shift+4 move container to workspace number 4
    $mod+Shift+5 move container to workspace number 5
    $mod+Shift+6 move container to workspace number 6
    $mod+Shift+7 move container to workspace number 7
    $mod+Shift+8 move container to workspace number 8
    $mod+Shift+9 move container to workspace number 9
    # move and go
    $mod+$alt+Shift+1 move container to workspace number 1; workspace number 1
    $mod+$alt+Shift+2 move container to workspace number 2; workspace number 2
    $mod+$alt+Shift+3 move container to workspace number 3; workspace number 3
    $mod+$alt+Shift+4 move container to workspace number 4; workspace number 4
    $mod+$alt+Shift+5 move container to workspace number 5; workspace number 5
    $mod+$alt+Shift+6 move container to workspace number 6; workspace number 6
    $mod+$alt+Shift+7 move container to workspace number 7; workspace number 7
    $mod+$alt+Shift+8 move container to workspace number 8; workspace number 8
    $mod+$alt+Shift+9 move container to workspace number 9; workspace number 9
}

# Media binds, no sxhkd
bindsym --locked {
    XF86AudioPlay exec playerctl play-pause
    #my laptop can't figure it out, play-pause a way to go
    #XF86AudioPause exec playerctl pause
    XF86AudioStop exec playerctl stop
    XF86AudioPrev exec playerctl previous
    XF86AudioNext exec playerctl next

    XF86AudioRaiseVolume exec amixer sset Master 4%+
    XF86AudioLowerVolume exec amixer sset Master 4%-
    XF86AudioMute exec pactl set-sink-mute @DEFAULT_SINK@ toggle
    XF86AudioMicMute exec pactl set-source-mute @DEFAULT_SINK@ toggle
}

bindsym $mod+r mode "resize"
mode "resize" {
    bindsym {
        $down resize grow height 15px
        $up resize shrink height 15px
        $left resize shrink width 15px
        $right resize grow width 15px
        # based on my nvim binds 
        F5 resize grow height 15px
        F6 resize shrink height 15px
        F7 resize grow width 15px
        F8 resize shrink width 15px
    }
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

#bar {
# Read `man 5 sway-bar`
    #swaybar_command waybar
    #modifier none
    #position top
    ##status_command while date +'%a %d %b %H:%M'; do sleep 29; done
    #colors {
        #statusline #ffffff
        #background #323232
        #inactive_workspace #323232 #323232 #5c5c5c
    #}
#}
exec waybar
